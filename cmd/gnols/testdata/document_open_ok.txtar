# Init phase
server start
lsp initialize
lsp initialized
lsp didChangeConfiguration

# Test open document
lsp textDocument-didOpen gnotest.gno
cmpenv notify.json notify.json.golden
# gno transpile should have created a gno.gen.go file
cmp gnotest.gno.gen.go gnotest.gno.gen.go.golden

server stop

-- notify.json.golden --
{
  "jsonrpc": "2.0",
  "method": "textDocument/publishDiagnostics",
  "params": {
    "uri": "file://$WORK/gnotest.gno",
    "diagnostics": []
  }
}
-- gnotest.gno --
package gnotest

func Hello() string {
	return "hello world"
}
-- gnotest.gno.gen.go.golden --
// Code generated by github.com/gnolang/gno. DO NOT EDIT.

//go:build gno

//line gnotest.gno:1:1
package gnotest

func Hello() string {
	return "hello world"
}
